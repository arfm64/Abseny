
import Image from "next/image";
import { useRouter } from 'next/navigation';
import { signOut } from 'next-auth/react';



type PageName =
    | "Dashboard"
    | "Daftar Karyawan"
    | "Daftar Absensi"
    | "Daftar Gaji"
    | "Periksa permohonan izin"
    | "Atur Wilayah Absensi";

interface SidebarProps {
    activePage: PageName;
    handlePageChange: (page: PageName) => void;
}

export default function Sidebar({ activePage, handlePageChange }: SidebarProps) {
    const router = useRouter();

    const handleLogout = async () => {
        try {
            // Panggil signOut dari next-auth
            await signOut({ redirect: false });

            // Redirect ke halaman login setelah logout
            router.push('/login');
        } catch (error) {
            console.error('Terjadi kesalahan saat logout', error);
        }
    };
    const isActive = (page: PageName) => activePage === page ? "bg-white text-[#4285f4] shadow-md" : "text-black";
    return (
        <aside className="w-4/12 sm:w-4/12 xl:w-2/12 md:4/12 h-screen px-4 rounded-3xl hidden sm:block relative p-5">
            <div className="flex items-center justify-between w-full rounded-2xl p-2 mb-3 mt-1" style={{ backgroundColor: '#FFFFFF' }}>
                <Image src="/abseny_dashboard_logo.png" alt="Logo" width={50} height={50} />
                <h5 className="uppercase font-bold text-[#4EB1FC] w-full ms-1 tracking-[2px]">Abseny</h5>
                <button type="button" className="rounded-md border-2 p-1">
                    <span className="sr-only">Open sidebar</span>
                    <svg className="w-3 h-3" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 4h20v2H0V4zm0 6h20v2H0V10zm0 6h20v2H0v-2z"></path>
                    </svg>
                </button>
            </div>
            <hr />
            <ul className="mt-5 w-full">
                <p className="font-semibold text-black opacity-20 uppercase mb-2" style={{ fontFamily: 'Roboto', fontSize: '12px' }}>MAIN MENU</p>
                <li className="block mb-1">
                    <button
                        onClick={() => handlePageChange("Dashboard")}
                        className={`w-full font-semibold text-opacity-70 text-[16px] font-[Roboto] flex items-center py-2 px-3 rounded-lg hover:bg-white hover:text-[#4285f4] hover:shadow-md ${isActive("Dashboard")}`}>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" className="mr-2" version="1.0" viewBox="0 0 512 512"><path d="M246.7 26c-11 6.1-12.8 22.5-3.2 30.9 4.4 3.8 9.1 5.1 18.7 5.1 17.9 0 44.5 5.3 62.9 12.6 39.4 15.5 70.3 40.4 93.2 74.9 42.3 64.1 42.3 148.8 0 213-22.7 34.3-54.9 60.2-93.6 75.2-35.6 13.7-79.2 16.1-117.1 6.3-54-13.9-99.9-50.8-124.8-100.5C68.7 315.6 62 287.3 62 256c0-40 11.2-75.9 34.2-110.2 8.1-12 8.3-12.4 8.3-18.3 0-4.6-.6-6.9-2.4-9.8-6.4-10.3-19.7-12.4-28.7-4.5-5.3 4.7-18.7 25.5-25.9 40.3-10.7 22-17.1 41.7-21.2 66.3-2.5 15.1-2.5 58.2 0 72.7 11.6 66.4 47.1 121.1 102.2 157.7 27 17.9 57.6 29.8 91.3 35.5 15.1 2.5 58.2 2.5 72.7 0 39.1-6.9 72.8-21.2 103.2-44.1 41.5-31.1 72.8-77.9 85.3-127.3 5.6-22.1 6.5-30.4 6.5-58.8-.1-27.8-.9-35.3-6.1-56-16.5-65.9-62.1-122.3-122.9-152-30.7-15-59.3-22.2-91.5-23.1-15.2-.4-16.8-.3-20.3 1.6z" /><path d="M246.7 90c-11 6.1-12.8 22.5-3.2 30.9 4.2 3.7 9 5.1 17.5 5.1 16 0 38.4 6 55.3 14.7 34.1 17.6 58.6 50 67.3 88.8 2.4 11 2.9 35 1 47-8.8 53.4-48.6 95.2-102.1 107.1-11 2.4-35 2.9-47 1-41.1-6.8-76.5-32.5-95.2-69.2-8.9-17.3-12.9-32.3-14.2-53.1-.9-13.6-2-16.5-8.4-21.7-3.5-2.8-4.6-3.1-10.7-3.1-6 0-7.4.4-11.1 3-6.6 4.7-7.9 8.1-7.9 20.5 0 40.1 18.1 82.8 48 113 24 24.3 52 39.6 86 47.1 12.2 2.6 41.6 3.7 55.3 2 63.6-8 118.4-53 138.5-113.8 6.4-19.4 7.7-28.4 7.7-53.8-.1-25.7-1.1-32.7-8-53.2-9.2-27.5-26.6-53.8-47.7-72.3-29.9-26-65.7-40.5-102.8-41.6-13.2-.4-14.8-.3-18.3 1.6z" /><path d="M246.7 154.1c-7.9 4.1-11.6 14.7-8.3 23.4 3.2 8.1 10.4 12.5 21.1 12.5 7.5 0 17 2.6 26.4 7.2 6.8 3.2 10.1 5.7 16.6 12.2 13.1 13.2 19.5 28.4 19.5 46.5 0 11-2 19.5-7.2 30-3.2 6.8-5.7 10.1-12.2 16.6-12.5 12.5-24.3 17.8-42.9 19.5-10.9.9-14.3 2.4-19.1 8.3-2.8 3.5-3.1 4.6-3.1 10.7 0 6 .4 7.4 3 11.1 4.5 6.3 8.3 7.9 18.6 7.9 18.6 0 37.7-6 54.9-17.1 8.8-5.7 23.4-20.6 29.8-30.3 5.9-9 10.4-19.3 13.4-30.4 2.6-9.9 3.6-32.1 1.8-42.9-6.9-42.9-40.6-77.7-83-85.7-11.8-2.3-24.5-2-29.3.5z" /></svg>
                        Dashboard
                    </button>
                </li>
                <li className="block mb-1">
                    <button
                        onClick={() => handlePageChange("Daftar Karyawan")}
                        className={`w-full font-semibold text-opacity-70 text-[16px] font-[Roboto] flex items-center py-2 px-3 rounded-lg hover:bg-white hover:text-[#4285f4] hover:shadow-md ${isActive("Daftar Karyawan")}`}>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" className="mr-2"><path stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M15 5.967a.504.504 0 0 0-.158 0 2.144 2.144 0 0 1-2.067-2.15c0-1.192.958-2.15 2.15-2.15a2.15 2.15 0 0 1 .075 4.3ZM14.142 12.033c1.141.192 2.4-.008 3.283-.6 1.175-.783 1.175-2.066 0-2.85-.892-.591-2.167-.791-3.308-.591M4.975 5.967a.504.504 0 0 1 .158 0A2.144 2.144 0 0 0 7.2 3.817c0-1.192-.958-2.15-2.15-2.15a2.15 2.15 0 0 0-.075 4.3ZM5.833 12.033c-1.141.192-2.4-.008-3.283-.6-1.175-.783-1.175-2.066 0-2.85.892-.591 2.167-.791 3.308-.591M10 12.192a.506.506 0 0 0-.158 0 2.144 2.144 0 0 1-2.067-2.15c0-1.192.958-2.15 2.15-2.15a2.15 2.15 0 0 1 2.15 2.15c-.008 1.166-.925 2.116-2.075 2.15ZM7.575 14.817c-1.175.783-1.175 2.067 0 2.85 1.333.891 3.517.891 4.85 0 1.175-.784 1.175-2.067 0-2.85-1.325-.883-3.517-.883-4.85 0Z" /></svg>
                        Daftar Karyawan
                    </button>
                </li>

                <li className="block mb-1">
                    <button
                        onClick={() => handlePageChange("Daftar Absensi")}
                        className={`w-full font-semibold text-opacity-70 text-[16px] font-[Roboto] flex items-center py-2 px-3 rounded-lg hover:bg-white hover:text-[#4285f4] hover:shadow-md ${isActive("Daftar Absensi")}`}>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" className="mr-2"><path fill="currentColor" fillRule="evenodd" d="M9.952 1.042h.096c1.923 0 3.431 0 4.607.158 1.204.161 2.154.5 2.9 1.245.745.746 1.083 1.696 1.245 2.9.158 1.176.158 2.683.158 4.607v.096c0 1.923 0 3.43-.158 4.607-.162 1.204-.5 2.154-1.245 2.9-.746.745-1.696 1.083-2.9 1.245-1.176.158-2.684.158-4.607.158h-.096c-1.924 0-3.431 0-4.607-.158-1.204-.162-2.154-.5-2.9-1.245-.746-.746-1.083-1.696-1.245-2.9-.158-1.176-.158-2.684-.158-4.607v-.096c0-1.924 0-3.431.158-4.607.162-1.204.5-2.154 1.245-2.9.746-.746 1.696-1.084 2.9-1.245 1.176-.159 2.683-.159 4.607-.158Zm-4.44 1.396c-1.066.144-1.708.416-2.183.89-.475.476-.747 1.118-.89 2.183-.146 1.083-.147 2.507-.147 4.489 0 1.982.001 3.405.147 4.489.143 1.065.415 1.707.89 2.182.475.475 1.117.747 2.182.89 1.084.146 2.507.147 4.489.147 1.982 0 3.405-.001 4.489-.147 1.065-.143 1.707-.415 2.182-.89.475-.475.747-1.117.89-2.182.146-1.084.147-2.507.147-4.49 0-1.981-.001-3.405-.147-4.488-.143-1.065-.415-1.707-.89-2.182-.475-.475-1.117-.747-2.182-.89-1.084-.146-2.507-.147-4.489-.147-1.982 0-3.405 0-4.489.146Zm3.252 2.943c.25.238.26.633.022.883l-2.381 2.5a.625.625 0 0 1-.905 0l-.953-1a.625.625 0 0 1 .906-.862l.5.525L7.88 5.402a.625.625 0 0 1 .883-.021ZM10.208 7.5c0-.345.28-.625.625-.625H15a.625.625 0 0 1 0 1.25h-4.167a.625.625 0 0 1-.625-.625Zm-1.444 3.714c.25.238.26.634.022.883l-2.381 2.5a.625.625 0 0 1-.905 0l-.953-1a.625.625 0 1 1 .906-.861l.5.524 1.928-2.024a.625.625 0 0 1 .883-.022Zm1.444 2.12c0-.346.28-.626.625-.626H15a.625.625 0 0 1 0 1.25h-4.167a.625.625 0 0 1-.625-.625Z" clipRule="evenodd" /></svg>
                        Daftar Absensi
                    </button>
                </li>

                <li className="block mb-1">
                    <button
                        onClick={() => handlePageChange("Daftar Gaji")}
                        className={`w-full font-semibold text-opacity-70 text-[16px] font-[Roboto] flex items-center py-2 px-3 rounded-lg hover:bg-white hover:text-[#4285f4] hover:shadow-md ${isActive("Daftar Gaji")}`}>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" className="mr-2"><path fill="currentColor" fillRule="evenodd" d="M8.957.042h.086c.749 0 1.373 0 1.869.066.523.07.995.225 1.375.605s.534.852.605 1.375c.049.366.062.803.065 1.308.54.017 1.022.049 1.45.106.977.132 1.768.409 2.392 1.032.624.624.9 1.415 1.032 2.392.127.949.127 2.162.127 3.694v.094c0 1.531 0 2.744-.127 3.693-.132.977-.408 1.768-1.032 2.392-.624.623-1.415.9-2.391 1.032-.95.127-2.163.127-3.694.127H7.286c-1.531 0-2.744 0-3.694-.127-.977-.132-1.767-.409-2.391-1.032-.624-.624-.9-1.415-1.032-2.392-.127-.949-.127-2.162-.127-3.694v-.093c0-1.532 0-2.745.127-3.694.132-.977.408-1.768 1.032-2.392.624-.623 1.414-.9 2.391-1.032.429-.057.91-.089 1.45-.106.004-.505.017-.942.066-1.308.07-.523.225-.996.605-1.375.38-.38.852-.535 1.375-.605.496-.067 1.12-.067 1.869-.066ZM6.293 3.376l.993-.001h3.428l.993.001a9.368 9.368 0 0 0-.054-1.122c-.052-.384-.141-.549-.25-.657-.108-.109-.273-.198-.658-.25-.402-.054-.942-.055-1.745-.055-.803 0-1.343 0-1.746.055-.384.052-.549.141-.657.25-.109.108-.198.273-.25.657-.039.289-.05.647-.054 1.122ZM3.76 4.741c-.838.113-1.321.324-1.674.677-.353.353-.564.836-.677 1.674-.115.857-.116 1.985-.116 3.574 0 1.59.001 2.718.116 3.575.113.838.324 1.321.677 1.674.353.353.836.564 1.674.677.856.115 1.985.116 3.574.116h3.334c1.589 0 2.717-.001 3.574-.116.838-.113 1.321-.324 1.674-.677.353-.353.564-.836.677-1.674.115-.857.116-1.986.116-3.575 0-1.589-.001-2.717-.116-3.574-.113-.838-.324-1.321-.677-1.674-.353-.353-.836-.564-1.674-.677-.857-.115-1.985-.116-3.574-.116H7.333c-1.589 0-2.718.001-3.574.116ZM9 6.708c.345 0 .625.28.625.625v.009c.907.228 1.667.944 1.667 1.936a.625.625 0 1 1-1.25 0c0-.32-.355-.764-1.042-.764s-1.042.444-1.042.764.355.763 1.042.763c1.154 0 2.292.8 2.292 2.014 0 .992-.76 1.708-1.667 1.936V14a.625.625 0 1 1-1.25 0v-.009c-.907-.228-1.667-.944-1.667-1.936a.625.625 0 1 1 1.25 0c0 .32.355.764 1.042.764s1.042-.444 1.042-.764-.355-.764-1.042-.764c-1.154 0-2.292-.8-2.292-2.013 0-.992.76-1.708 1.667-1.936v-.009c0-.345.28-.625.625-.625Z" clipRule="evenodd" /></svg>
                        Daftar Gaji
                    </button>
                </li>

            </ul>
            <ul className="mt-5 w-full">
                <p className="font-semibold text-black opacity-20 uppercase mb-2" style={{ fontFamily: 'Roboto', fontSize: '12px' }}>Other</p>
                <li className="block mb-1">
                    <button
                        onClick={() => handlePageChange("Atur Wilayah Absensi")}
                        className={`w-full font-semibold text-opacity-70 text-[16px] font-[Roboto] flex items-center py-2 px-3 rounded-lg hover:bg-white hover:text-[#4285f4] hover:shadow-md ${isActive("Atur Wilayah Absensi")}`}>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" className="mr-2"><path fill="currentColor" fillRule="evenodd" d="M10 6.875a3.125 3.125 0 1 0 0 6.25 3.125 3.125 0 0 0 0-6.25ZM8.125 10a1.875 1.875 0 1 1 3.75 0 1.875 1.875 0 0 1-3.75 0Z" clipRule="evenodd" /><path fill="currentColor" fillRule="evenodd" d="M9.979 1.042c-.37 0-.68 0-.933.017a2.353 2.353 0 0 0-.756.157 2.292 2.292 0 0 0-1.24 1.24c-.122.293-.154.6-.167.935a.723.723 0 0 1-.346.61.723.723 0 0 1-.701-.005c-.297-.156-.58-.282-.894-.323a2.292 2.292 0 0 0-1.694.454c-.208.16-.366.356-.514.576-.142.21-.296.479-.482.8l-.02.036c-.186.32-.34.588-.452.817a2.353 2.353 0 0 0-.242.733c-.08.603.084 1.212.454 1.694.192.251.443.434.727.612a.723.723 0 0 1 .354.605.723.723 0 0 1-.354.605c-.284.178-.535.36-.727.611a2.292 2.292 0 0 0-.454 1.695c.034.26.125.495.242.733.112.228.266.496.451.817l.021.036c.186.321.34.589.482.8.148.22.306.416.514.576.482.37 1.092.533 1.694.454.314-.041.597-.167.893-.324.239-.126.501-.12.702-.004.2.115.336.34.346.61.013.334.045.642.166.934a2.292 2.292 0 0 0 1.24 1.24c.243.101.492.14.757.158.253.017.563.017.933.017h.042c.37 0 .68 0 .933-.017.265-.018.514-.057.756-.157a2.292 2.292 0 0 0 1.24-1.24c.122-.293.155-.6.167-.936a.723.723 0 0 1 .346-.61.723.723 0 0 1 .702.005c.296.157.579.283.893.324a2.292 2.292 0 0 0 1.694-.454c.208-.16.366-.356.514-.576.142-.211.296-.479.482-.8l.02-.036c.186-.321.34-.589.452-.817.117-.238.208-.474.242-.733a2.292 2.292 0 0 0-.454-1.695c-.192-.25-.443-.433-.726-.611a.723.723 0 0 1-.355-.605c0-.232.126-.462.355-.605.283-.178.534-.36.726-.612.37-.482.534-1.091.454-1.694a2.353 2.353 0 0 0-.242-.733 14.759 14.759 0 0 0-.451-.817l-.021-.037c-.186-.32-.34-.588-.482-.8a2.354 2.354 0 0 0-.514-.575 2.292 2.292 0 0 0-1.694-.454c-.314.041-.597.167-.893.323a.723.723 0 0 1-.702.005.723.723 0 0 1-.346-.61c-.013-.334-.045-.643-.166-.935a2.292 2.292 0 0 0-1.24-1.24c-.243-.1-.492-.14-.757-.157-.253-.018-.563-.017-.933-.017H9.98ZM8.769 2.37a1.15 1.15 0 0 1 .362-.065c.206-.014.472-.014.869-.014s.663 0 .87.014c.2.014.298.038.362.065.255.106.458.308.564.564.033.08.06.206.072.503.025.66.365 1.296.97 1.646.606.349 1.327.326 1.91.017.264-.139.386-.178.473-.189.274-.036.55.038.77.206.055.043.125.115.238.282.115.172.248.402.447.746.198.343.33.574.422.76.088.18.116.277.125.346.036.274-.038.551-.206.77-.053.07-.148.156-.4.315-.56.351-.94.964-.94 1.663 0 .698.38 1.312.94 1.663.252.159.346.245.4.314.168.22.242.496.206.77a1.15 1.15 0 0 1-.125.347c-.091.186-.224.416-.422.76a14.25 14.25 0 0 1-.448.746c-.112.167-.182.239-.237.281-.22.168-.496.243-.77.207-.087-.012-.21-.05-.472-.19a1.973 1.973 0 0 0-1.91.018c-.606.35-.946.985-.971 1.645-.011.298-.039.424-.072.504a1.041 1.041 0 0 1-.564.564 1.151 1.151 0 0 1-.363.065c-.206.014-.472.014-.869.014s-.663 0-.87-.014a1.15 1.15 0 0 1-.362-.065 1.041 1.041 0 0 1-.564-.564c-.033-.08-.06-.206-.072-.504a1.972 1.972 0 0 0-.97-1.645 1.972 1.972 0 0 0-1.91-.018c-.264.14-.386.178-.473.19a1.042 1.042 0 0 1-.77-.207 1.15 1.15 0 0 1-.237-.281 14.205 14.205 0 0 1-.448-.746 14.256 14.256 0 0 1-.422-.76 1.15 1.15 0 0 1-.125-.347c-.036-.274.038-.55.206-.77.054-.069.148-.155.4-.314.56-.351.94-.965.94-1.663 0-.699-.38-1.312-.94-1.664-.252-.158-.346-.245-.4-.314a1.042 1.042 0 0 1-.206-.77 1.15 1.15 0 0 1 .125-.346c.091-.186.224-.417.422-.76.199-.344.332-.575.448-.746a1.15 1.15 0 0 1 .237-.282c.22-.168.496-.242.77-.206.087.011.21.05.472.19a1.972 1.972 0 0 0 1.91-.018c.606-.35.947-.986.971-1.646.011-.297.039-.423.072-.503.106-.256.309-.458.564-.564Z" clipRule="evenodd" /></svg>
                        Atur Wilayah Absensi
                    </button>
                </li>
                <li className="block mb-1">
                    <button
                        onClick={() => handlePageChange("Periksa permohonan izin")}
                        className={`w-full font-semibold text-opacity-70 text-[16px] font-[Roboto] flex items-center py-2 px-3 rounded-lg hover:bg-white hover:text-[#4285f4] hover:shadow-md ${isActive("Periksa permohonan izin")}`}>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" className="mr-2"><path fill="currentColor" d="M10 1.667V7.5l1.667-1.667" /><path stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M10 1.667V7.5l1.667-1.667M10 7.5 8.333 5.833M1.65 10.834h3.675c.317 0 .6.175.742.458l.975 1.95c.283.566.858.925 1.491.925h2.942c.633 0 1.208-.358 1.492-.925l.975-1.95a.833.833 0 0 1 .741-.458h3.634" /><path stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" d="M5.833 3.442c-2.95.433-4.166 2.167-4.166 5.725V12.5c0 4.167 1.666 5.834 5.833 5.834h5c4.167 0 5.833-1.667 5.833-5.834V9.167c0-3.558-1.216-5.292-4.166-5.725" /></svg>
                        Periksa permohonan izin
                    </button>
                </li>
            </ul>
            <div className="absolute w-full rounded-2xl pr-8 mb-3 bottom-0">
                <div className="flex items-center justify-between w-full rounded-2xl p-2 mb-3 mt-1" style={{ backgroundColor: '#FFFFFF' }}>
                    <button type="button" className="flex items-center w-full" onClick={handleLogout} >
                        <Image src="/user.png" alt="Logo" width={40} height={40} />
                        <h5 className="font-normal text-black text-start text-opacity-70 w-full ms-1">Admin</h5>
                        <Image src="/btn_logout.png" alt="Logo" width={40} height={40} className="text-end" />
                    </button>
                </div>
            </div>
        </aside >

    );
}